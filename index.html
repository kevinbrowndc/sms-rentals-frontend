<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RentalSMS | SMS Apartment Listings</title>

  <meta name="description" content="Get SMS alerts when apartments matching your budget hit the market in Austin." />

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: #ffffff;
      color: #111827;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
      padding: 48px 20px;
    }

    h1 {
      font-size: 2.25rem;
      margin-bottom: 0.5rem;
    }

    p {
      margin-bottom: 1rem;
      color: #374151;
    }

    form {
      margin-top: 2rem;
      border: 1px solid #e5e7eb;
      padding: 24px;
      border-radius: 8px;
    }

    label {
      display: block;
      font-weight: 600;
      margin-top: 1rem;
    }

    input {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      font-size: 1rem;
      border: 1px solid #d1d5db;
      border-radius: 6px;
    }

    button {
      margin-top: 1.5rem;
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      font-weight: 600;
      background-color: #111827;
      color: #ffffff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:disabled {
      background-color: #9ca3af;
      cursor: not-allowed;
    }

    .small {
      font-size: 0.9rem;
      color: #6b7280;
      margin-top: 0.75rem;
    }

    .section {
      margin-top: 3rem;
    }

    footer {
      margin-top: 4rem;
      border-top: 1px solid #e5e7eb;
      padding-top: 1.5rem;
      font-size: 0.9rem;
      color: #6b7280;
    }

    footer a {
      color: #374151;
      text-decoration: none;
      margin-right: 1rem;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .status {
      margin-top: 1rem;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <main class="container">

    <h1>RentalSMS</h1>
    <p>
      RentalSMS provides opt-in SMS alerts when new rental listings
matching your preferences become available.

Users sign up on this website to receive recurring text messages
about rental opportunities in Austin.
    </p>

<form id="signup-form">
  <label for="phone">Phone number</label>
  <input id="phone" type="tel" placeholder="+1 512 555 1234" required />

  <label for="city">City</label>
  <input id="city" type="text" value="Austin" required />

  <label for="max_price">Max monthly rent ($)</label>
  <input id="max_price" type="number" value="1500" required />

<!-- Explicit Consent Checkbox -->
<div style="margin-top:20px; width:100%;">
  <label style="
    display:flex;
    align-items:flex-start;
    gap:12px;
    font-size:14px;
    line-height:1.5;
    width:100%;
  ">
    <input
      type="checkbox"
      id="smsConsent"
      required
      style="margin-top:4px;"
    />
    <span style="flex:1;">
      I agree to receive recurring SMS rental alerts from RentalSMS,
      operated by Kevin Brown. Message frequency may vary (up to 3
      messages per day). Message and data rates may apply.
      Reply STOP to unsubscribe. Reply HELP for help.
      View our <a href="/privacy">Privacy Policy</a> and
      <a href="/terms">Terms of Service</a>.
    </span>
  </label>
</div>

  <button type="submit">Get Alerts</button>

  <div id="status" class="status"></div>
</form>
    <div class="section">
      <h2>How it works</h2>
      <p>
        RentalSMS sends SMS notifications when new rental listings
        matching your preferences are detected. You may receive up to
        3 messages per day.
        RentalSMS is a transactional SMS notification service operated by Kevin Brown. By submitting your phone number, you consent to receive recurring SMS rental alerts based on your selected preferences. Message frequency may vary (up to 3 messages per day). Message and data rates may apply. Reply STOP to unsubscribe or HELP for assistance.
      </p>
    </div>

    <footer>
      <p>
        <a href="/contact">Contact</a>
        <a href="/privacy">Privacy Policy</a>
        <a href="/terms">Terms of Service</a>
      </p>

      <p>
        Support: For help, reply <strong>HELP</strong> or email
        <a href="mailto:support@rentalsms.com">support@rentalsms.com</a>.
      </p>
    </footer>

  </main>

  <script>
    const form = document.getElementById("signup-form");
    const statusDiv = document.getElementById("status");
    const button = form.querySelector("button");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusDiv.textContent = "";
      button.disabled = true;

      const payload = {
        phone: document.getElementById("phone").value.trim(),
        city: document.getElementById("city").value.trim(),
        max_price: Number(document.getElementById("max_price").value),
      };

      try {
        const res = await fetch("https://sms-rentals-api.onrender.com/signup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        if (!res.ok) {
          throw new Error("Signup failed");
        }

        statusDiv.textContent = "✅ You’re signed up! Watch your phone for alerts.";
      } catch (err) {
        statusDiv.textContent = "❌ Something went wrong. Please try again.";
      } finally {
        button.disabled = false;
      }
    });
  </script>
</body>
</html>

